(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{48:function(t,e,i){},53:function(t,e,i){"use strict";var s=i(48);i.n(s).a},60:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"xc_"},[i("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){t.dialogVisible=!t.dialogVisible}}},[t._v("\n    上传图片\n    "),i("i",{staticClass:"el-icon-upload el-icon--right"})]),t._v(" "),i("el-dialog",{attrs:{visible:t.dialogVisible,width:"90%",height:"30%","before-close":t.handleClose},on:{"update:visible":function(e){t.dialogVisible=e}}},[i("div",{staticClass:"update"},[i("avue-form",{ref:"formData",attrs:{option:t.option},on:{submit:t.submit},model:{value:t.form,callback:function(e){t.form=e},expression:"form"}})],1)]),t._v(" "),i("el-row",t._l(t.xcs__,(function(e,s){return i("el-col",{key:s,attrs:{span:4}},[i("div",{staticClass:"album_box",style:{opacity:0==e.show?1:.3}},[i("div",{staticClass:"album_box_show"},[t._v(t._s(e.urls.length))]),t._v(" "),i("el-image",{staticClass:"album_box_img",attrs:{fit:"cover",src:e.urls.length>0?e.urls[e.urls.length-1].url:""},on:{click:function(i){return t.getinfo(e)}}},[i("div",{staticClass:"image-slotaaa",staticStyle:{"text-align":"center"},attrs:{slot:"error"},slot:"error"},[i("i",{staticClass:"el-icon-picture-outline"})])]),t._v(" "),i("div",{staticClass:"album_box_tit"},[t._v("\n          "+t._s(e.name)+"\n          "),i("span",[i("i",{staticClass:"el-icon-s-tools",on:{click:function(i){return t.set(e)}}})])])],1)])})),1),t._v(" "),i("el-dialog",{attrs:{title:t.info_data.tit,visible:t.dialogVisible2,width:"90%",top:"30px","before-close":t.handleClose},on:{"update:visible":function(e){t.dialogVisible2=e}}},[i("div",{staticClass:"info",style:{height:t.info_h+"px"}},[i("el-row",t._l(t.info_data.lists,(function(e,s){return i("el-col",{key:s,attrs:{span:4}},[i("div",{staticClass:"info_box"},[i("div",{staticClass:"info_box_boxx"},[i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:e.createtime,placement:"top"}},[i("el-image",{staticClass:"info_box_img",attrs:{fit:"cover",src:e.url,previewSrcList:t.srcList}})],1),t._v(" "),i("div",{staticClass:"info_box_tit"},[i("span",[t._v(t._s(e.name))]),t._v(" "),i("i",{staticClass:"el-icon-delete",on:{click:function(i){return t.deleimg(e.id,s)}}})])],1)])])})),1)],1)])],1)};s._withStripped=!0;var a={data:function(){return{form:"",dialogVisible:!1,xcs:[],xcs__:[],dialogVisible2:!1,info_h:500,info_data:{tit:"",lists:[]},srcList:[]}},created:function(){this.getcolumu(),this.getxcs()},computed:{dicData:function(){for(var t=this.xcs,e=[],i=0;i<t.length;i++)e.push({label:t[i].name,value:t[i].id});return e},option:function(){return{labelWidth:80,menuPosition:"right",column:[{label:"上传到",prop:"tree1",type:"tree",span:4,dicData:this.dicData,rules:[{required:!0,message:"请选择上传相册",trigger:"blur"}]},{label:"压缩率",prop:"ratio",span:4,type:"select",placeholder:"默认上传原图",dicData:[{label:"0.1",value:.1},{label:"0.2",value:.2},{label:"0.3",value:.3},{label:"0.4",value:.4},{label:"0.5",value:.5},{label:"0.6",value:.6},{label:"0.7",value:.7},{label:"0.8",value:.8},{label:"0.9",value:.9},{label:"1",value:1}]},{label:"水印文字",prop:"text",span:4},{label:"颜色",prop:"color",type:"color",span:4},{label:"大小",prop:"fontSize",span:4,tip:"字体像素",type:"number"},{label:"透明度",prop:"opacity",span:4,tip:"1-100数字",type:"number"},{prop:"imgUrl",type:"upload",span:24,listType:"picture-card",propsHttp:{res:"data",name:"label",url:"value"},action:"/app.php/home/UploadImg/index",canvasOption:{text:this.form.text||"  ",ratio:Number(this.form.ratio)||"1",color:this.form.color||"red",fontSize:this.form.fontSize||"16",opacity:this.form.opacity||"100"}}]}}},watch:{},methods:{deleimg:function(t,e){var i=this,s=this;this.$confirm("是否需要删除该图片?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){i.$httpajax.post("/app.php/home/Album/dele",i.$qs.stringify({id:t})).then((function(t){var a=t.data;a.result?(i.$message({message:a.msg,type:"success"}),s.getxcs(),s.info_data.lists.splice(e,1),s.srcList.splice(e,1)):i.$message.error(a.msg)})).catch((function(t){i.$message.error("网络错误")}))})).catch((function(){}))},set:function(t){var e=this,i=this,s="",a="";0==t.show&&(s="是否需要隐藏该相册？",a=1),1==t.show&&(s="是否需要显示该相册？",a=0);var o=t.id,l=t.name;this.$confirm(s,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.$httpajax.post("/app.php/home/cloumn/update",i.$qs.stringify({id:o,name:l,show:a,type:2})).then((function(t){e.dnzt=!1;var s=t.data;s.result?(e.$message({message:s.msg,type:"success"}),i.getxcs()):e.$message.error(s.msg)})).catch((function(){e.$message.error("网络错误")}))})).catch((function(){}))},getxcs:function(){var t=this;this.$httpajax.post("/app.php/home/Album/getlists",this.$qs.stringify({type:2})).then((function(e){var i=e.data;i.result&&(t.xcs__=i.lists)})).catch((function(){t.$message.error("网络错误")}))},submit:function(t,e){var i=this;this.$httpajax.post("/app.php/home/Album/save",this.$qs.stringify({imgUrl:JSON.stringify(this.form.imgUrl),column:this.form.tree1})).then((function(t){var s=t.data;e(),s.result&&(i.$message({message:s.msg,type:"success"}),i.dialogVisible=!1,i.$refs.formData.resetFields(),i.getxcs())})).catch((function(){e(),i.$message.error("网络错误")}))},getcolumu:function(){var t=this;this.$httpajax.post("/app.php/home/cloumn/getlist",this.$qs.stringify({type:2})).then((function(e){var i=e.data;i.result&&(t.xcs=i.data)})).catch((function(){t.$message.error("网络错误")}))},getinfo:function(t){this.srcList=[],this.info_data.lists=[],this.dialogVisible2=!0,this.info_data.tit=t.name,this.info_data.lists=t.urls;for(var e=[],i=0;i<t.urls.length;i++)e.push(t.urls[i].url);this.srcList=e}},mounted:function(){var t=document.body.clientHeight-194;this.info_h=t}},o=(i(53),i(3)),l=Object(o.a)(a,s,[],!1,null,"fe2dd7f0",null);l.options.__file="src/views/album/index.vue";e.default=l.exports}}]);
//# sourceMappingURL=4-34c8bb3335d95d6cbd84.js.map