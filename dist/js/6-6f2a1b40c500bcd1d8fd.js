(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{65:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("avue-crud",{attrs:{data:t.data,option:t.option,page:t.page},on:{"update:page":function(e){t.page=e},"row-save":t.save,"row-update":t.update,"row-del":t.del,"refresh-change":t.getList,"size-change":t.size,"selection-change":t.selectionChange},scopedSlots:t._u([{key:"label",fn:function(e){return t._l(e.row.label_arr,(function(e,s){return a("el-tag",{key:s,staticStyle:{margin:"0 2px"}},[t._v(t._s(e.name))])}))}}]),model:{value:t.obj,callback:function(e){t.obj=e},expression:"obj"}},[a("template",{slot:"menuLeft"},[a("el-button",{attrs:{type:"danger",size:"mini",icon:"el-icon-delete"},on:{click:t.dels}},[t._v("删 除")])],1)],2)],1)};s._withStripped=!0;var i={data:function(){return{obj:{show:"1"},data:[],selectionList:[],page:{pageSize:10,pagerCount:4,total:0},p:1,label:[],lms:[]}},computed:{ids:function(){var t=[];return this.selectionList.forEach((function(e){t.push(e.id)})),t.join(",")},option:function(){return{selection:!0,index:!0,addBtn:!1,align:"center",menuAlign:"center",height:"auto",calcHeight:80,column:[{label:"文章名称",prop:"name",rules:[{required:!0,message:"请输入文章名称",trigger:"blur"}]},{label:"栏目",prop:"type",type:"select",dicData:this.lms,rules:[{required:!0,message:"请选择栏目",trigger:"blur"}]},{label:"标签",prop:"label",type:"select",drag:!0,multiple:!0,dicData:this.label,slot:!0},{label:"发布时间",prop:"createtime",editDisabled:!0,editDisplay:!1},{label:"是否隐藏",prop:"show",type:"switch",dicData:[{label:"否",value:"1"},{label:"是",value:"0"}]}]}}},created:function(){this.getlm(),this.getlabel()},watch:{page:{handler:function(){this.page.currentPage&&(this.p=this.page.currentPage,this.getList())},deep:!0,immediate:!0}},methods:{getlm:function(){var t=this;this.data=[],this.$httpajax.post("/app.php/home/cloumn/getlist",this.$qs.stringify({type:1})).then((function(e){var a=e.data;if(a.result){for(var s=[],i=a.data,n=0;n<i.length;n++)s.push({label:i[n].name,value:i[n].id});t.lms=s}})).catch((function(){t.$message.error("网络错误")}))},getlabel:function(){var t=this;this.$httpajax.post("/app.php/home/label/getlist",this.$qs.stringify({})).then((function(e){var a=e.data;if(a.result){for(var s=[],i=a.data,n=0;n<i.length;n++)s.push({label:i[n].name,value:i[n].id});t.label=s}})).catch((function(){t.$message.error("网络错误")}))},selectionChange:function(t){this.selectionList=t},size:function(t){this.getList()},save:function(t,e,a){var s=this,i=this.obj,n=i.name,o=i.color;this.$httpajax.post("/app.php/home/label/save",this.$qs.stringify({name:n,color:o})).then((function(t){a(),e(),s.dnzt=!1;var i=t.data;i.result?(s.$message({message:i.msg,type:"success"}),s.getList()):s.$message.error(i.msg)})).catch((function(){a(),e(),s.$message.error("网络错误")}))},update:function(t,e,a,s){var i=this,n=this.obj,o=n.type,r=n.show,l=n.name,c=n.id,p=this.obj.label.length>0?this.obj.label.join(","):"";this.$httpajax.post("/app.php/home/ac/update",this.$qs.stringify({label:p,type:o,show:r,name:l,id:c})).then((function(t){s(),a(),i.dnzt=!1;var e=t.data;e.result?(i.$message({message:e.msg,type:"success"}),i.getList()):i.$message.error(e.msg)})).catch((function(){s(),a(),i.$message.error("网络错误")}))},getList:function(){var t=this;this.data=[];var e=this.page.pageSize,a=this.p;this.$httpajax.post("/app.php/home/Ac/getlist",this.$qs.stringify({pageSize:e,p:a})).then((function(e){var a=e.data;a.result&&(t.data=a.list,t.page.total=Number(a.total))})).catch((function(e){t.$message.error(e)}))},del:function(t,e){var a=this,s=this;this.$confirm("确认操作删除？, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){a.$httpajax.post("/app.php/home/ac/delete",a.$qs.stringify({id:t.id})).then((function(t){var e=t.data;e.result&&(a.$message({message:e.msg,type:"success"}),s.getList())})).catch((function(t){a.$message.error("网络错误")}))})).catch((function(){}))},dels:function(){var t=this;if(this.selectionList.length<1)this.$message.error("请至少选择一条数据！");else{var e=this;this.$confirm("确认删除选中文章？, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.$httpajax.post("/app.php/home/ac/deletes",t.$qs.stringify({ids:e.ids})).then((function(t){var a=t.data;a.result&&(e.$message({message:a.msg,type:"success"}),e.getList())})).catch((function(t){e.$message.error("网络错误")}))})).catch((function(){}))}}}},n=a(3),o=Object(n.a)(i,s,[],!1,null,null,null);o.options.__file="src/views/active/list.vue";e.default=o.exports}}]);
//# sourceMappingURL=6-6f2a1b40c500bcd1d8fd.js.map